<!DOCTYPE html>
<html>
<head>
    <title>Webhook Auto Reset</title>
</head>
<body>

<h2>Webhook Test</h2>
<button id="send">Send to Webhook</button>

<script>
const WEBHOOK_URL = "https://discord.com/api/webhooks/1448380489772826634/An0WojRA0q18mhLMb5mZCucTb89q9H14zkNwzG4Cikxx6_Q6KTOAR3ecESXEzSr3NA3I"; // replace with regenerated webhook

// Send a simple message to the webhook
function sendWebhookMessage(text) {
    fetch(WEBHOOK_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({
            content: text
        })
    }).catch(err => console.error("Failed:", err));
}

// When user taps the button:
document.getElementById("send").onclick = () => {
    sendWebhookMessage("Button pressed!");
};

// Track activity state
let hasTriggeredThisSession = false;

// Send message on visibility change
document.addEventListener("visibilitychange", () => {

    // Page goes to background (user switches apps or tabs)
    if (document.hidden) {
        console.log("User left the app → resetting trigger.");
        hasTriggeredThisSession = false; // reset state
    }

    // Page becomes active again
    else {
        console.log("User returned → firing trigger.");
        if (!hasTriggeredThisSession) {
            sendWebhookMessage("User returned to the app.");
            hasTriggeredThisSession = true;
        }
    }
});
</script>

</body>
</html>
